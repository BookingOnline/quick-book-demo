function AttachFrame(){for(var i=document.getElementsByTagName("a"),t=0;t<i.length;t++){var n=i[t],e=n.href,r=n.getAttribute("data-href"),u=r?r:e,f=n.className,o=f.length>0&&f.indexOf("addedModal")>-1;u.indexOf("/booking-responsive")>-1&&u.indexOf(".aspx")>-1&&!o&&(n.className=((n.className||"")+" addedModal").trim(),n.onclick=function(){var i="BCNIframeContainer",r=document.getElementById(i),n,t;return r&&r.parentNode.removeChild(r),n=document.createElement("IFRAME"),n.setAttribute("src",this.getAttribute("data-href")||this.href),n.setAttribute("allowtransparency","true"),n.setAttribute("scrolling","no"),n.setAttribute("style","display:block;border:none;margin:20px auto;width:100%;height:400px;"),n.id=i,t=document.getElementById("QuickBookContainer"),t?(t.innerHTML="",t.appendChild(n)):this.parentNode.insertBefore(n,this.nextSibling),window.scroll(0,findPos(this)),fadeIn(i),iFrameResize({enablePublicMethods:!0,checkOrigin:!1,messageCallback:function(n){LoadMessage(n)}}),!1})}}function findPos(n){var t=0;if(n.offsetParent){do t+=n.offsetTop;while(n=n.offsetParent);return[t]}}function LoadMessage(n){n.message=="ScrollToTop"&&window.scroll(0,findPos(document.getElementById("BCNIframeContainer")))}function LoadEverything(){AttachFrame()}function fadeOut(n,t){if(isNaN(t)&&(t=9),document.getElementById(n).style.opacity="0."+t,document.getElementById(n).style.filter="alpha(opacity="+t+"0)",t>0)t=t-1,setTimeout('fadeOut("'+n+'",'+t+")",30);else return}function fadeIn(n,t){if(isNaN(t)&&(t=0),document.getElementById(n).style.opacity=t/10,document.getElementById(n).style.filter="alpha(opacity="+t+"0)",t<=9)t++,setTimeout('fadeIn("'+n+'",'+t+")",30);else return}(function(n){"use strict";function f(t,i,r){"addEventListener"in n?t.addEventListener(i,r,!1):"attachEvent"in n&&t.attachEvent("on"+i,r)}function et(){for(var r=["moz","webkit","o","ms"],t=0;t<r.length&&!e;t+=1)e=n[r[t]+"RequestAnimationFrame"];e||i(" RequestAnimationFrame not supported")}function ot(){var t="Host page";return n.top!==n.self&&(t=n.parentIFrame?n.parentIFrame.getId():"Nested host page"),t}function w(n){return h+"["+ot()+"]"+n}function i(t){s&&"object"==typeof n.console&&console.log(w(t))}function o(t){"object"==typeof n.console&&console.warn(w(t))}function st(f){function v(){function n(){g(e);k()}p("Height");p("Width");nt(n,e,"resetPage")}function y(n){var r=n.id;i(" Removing iFrame: "+r);n.parentNode.removeChild(n);t[r].closedCallback(r);delete t[r];i(" --")}function et(){var n=a.substr(c).split(":");return{iframe:t[n[0]].iframe,id:n[0],height:n[1],width:n[2],type:n[3]}}function p(n){var f=Number(t[l]["max"+n]),o=Number(t[l]["min"+n]),r=n.toLowerCase(),u=Number(e[r]);if(o>f)throw new Error("Value for min"+n+" can not be greater than max"+n);i(" Checking "+r+" is in range "+o+"-"+f);u<o&&(u=o,i(" Set "+r+" to min value"));u>f&&(u=f,i(" Set "+r+" to max value"));e[r]=""+u}function ot(){function u(){function u(){i(" Checking connection is from allowed list of origins: "+n);for(var t=0;t<n.length;t++)if(n[t]===r)return!0;return!1}function f(){var n=t[l].remoteHost;return i(" Checking connection is from: "+n),r===n}return n.constructor===Array?u():f()}var r=f.origin,n=t[l].checkOrigin;if(n&&""+r!="null"&&!u())throw new Error("Unexpected message received from: "+r+" for "+e.iframe.id+". Message was: "+f.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function st(){return h===(""+a).substr(0,c)&&a.substr(c).split(":")[0]in t}function ht(){var n=e.type in{"true":1,"false":1,undefined:1};return n&&i(" Ignoring init message from meta parent page"),n}function w(n){return a.substr(a.indexOf(":")+ut+n)}function ct(n){i(" MessageCallback passed: {iframe: "+e.iframe.id+", message: "+n+"}");t[l].messageCallback({iframe:e.iframe,message:JSON.parse(n)});i(" --")}function lt(){return null===e.iframe?(o(" IFrame ("+e.id+") not found"),!1):!0}function it(n){var t=n.getBoundingClientRect();return b(),{x:parseInt(t.left,10)+parseInt(r.x,10),y:parseInt(t.top,10)+parseInt(r.y,10)}}function rt(t){function s(){r=f;ft();i(" --")}function h(){return{x:Number(e.width)+u.x,y:Number(e.height)+u.y}}var u=t?it(e.iframe):{x:0,y:0},f=h();i(" Reposition requested from iFrame (offset x:"+u.x+" y:"+u.y+")");n.top!==n.self?n.parentIFrame?n.parentIFrame["scrollTo"+(t?"Offset":"")](f.x,f.y):o(" Unable to scroll to requested position, window.parentIFrame not found"):s()}function ft(){!1!==t[l].scrollCallback(r)&&k()}function at(t){function o(n){var t=it(n);i(" Moving to in page link (#"+u+") at x: "+t.x+" y: "+t.y);r={x:t.x,y:t.y};ft();i(" --")}var u=t.split("#")[1]||"",f=decodeURIComponent(u),e=document.getElementById(f)||document.getElementsByName(f)[0];n.top!==n.self?n.parentIFrame?n.parentIFrame.moveToAnchor(u):i(" In page link #"+u+" not found and window.parentIFrame not found"):e?o(e):i(" In page link #"+u+" not found")}function vt(){t[l].firstRun&&wt();switch(e.type){case"close":y(e.iframe);break;case"message":ct(w(6));break;case"scrollTo":rt(!1);break;case"scrollToOffset":rt(!0);break;case"inPageLink":at(w(9));break;case"reset":d(e);break;case"init":v();t[l].initCallback(e.iframe);t[l].resizedCallback(e);break;default:v();t[l].resizedCallback(e)}}function yt(n){var i=!0;return t[n]||(i=!1,o(e.type+" No settings for "+n+". Message was: "+a)),i}function pt(){for(var n in t)u("iFrame requested init",tt(n),document.getElementById(n),n)}function wt(){t[l].firstRun=!1;Function.prototype.bind&&(t[l].iframe.iFrameResizer={close:y.bind(null,t[l].iframe),resize:u.bind(null,"Window resize","resize",t[l].iframe),moveToAnchor:function(n){u("Move to anchor","inPageLink:"+n,t[l].iframe,l)},sendMessage:function(n){n=JSON.stringify(n);u("Send Message","message:"+n,t[l].iframe,l)}})}var a=f.data,e={},l=null;"[iFrameResizerChild]Ready"===a?pt():st()?(e=et(),l=e.id,!ht()&&yt(l)&&(s=t[l].log,i(" Received: "+a),lt()&&ot()&&vt())):i(" Ignored: "+a)}function b(){null===r&&(r={x:n.pageXOffset!==undefined?n.pageXOffset:document.documentElement.scrollLeft,y:n.pageYOffset!==undefined?n.pageYOffset:document.documentElement.scrollTop},i(" Get page position: "+r.x+","+r.y))}function k(){null!==r&&(n.scrollTo(r.x,r.y),i(" Set page position: "+r.x+","+r.y),r=null)}function d(n){function t(){g(n);u("reset","reset",n.iframe,n.id)}i(" Size reset requested by "+("init"===n.type?"host page":"iFrame"));b();nt(t,n,"init")}function g(n){function f(t){n.iframe.style[t]=n[t]+"px";i(" IFrame ("+r+") "+t+" set to "+n[t]+"px")}function e(t){p||"0"!==n[t]||(p=!0,i(" Hidden iFrame detected, creating visibility listener"),ct())}function u(n){f(n);e(n)}var r=n.iframe.id;t[r].sizeHeight&&u("height");t[r].sizeWidth&&u("width")}function nt(n,t,r){r!==t.type&&e?(i(" Requesting animation frame"),e(n)):n()}function u(n,r,u,f){f=f||u.id;u&&u.contentWindow?(i("["+n+"] Sending msg to iframe["+f+"] ("+r+")"),u.contentWindow.postMessage(h+r,t[f].targetOrigin)):(o("["+n+"] IFrame("+f+") not found"),t[f]&&delete t[f])}function tt(n){return n+":"+t[n].bodyMarginV1+":"+t[n].sizeWidth+":"+t[n].log+":"+t[n].interval+":"+t[n].enablePublicMethods+":"+t[n].autoResize+":"+t[n].bodyMargin+":"+t[n].heightCalculationMethod+":"+t[n].bodyBackground+":"+t[n].bodyPadding+":"+t[n].tolerance+":"+t[n].inPageLinks+":"+t[n].resizeFrom+":"+t[n].widthCalculationMethod}function it(n,r){function h(){function r(r){Infinity!==t[e][r]&&0!==t[e][r]&&(n.style[r]=t[e][r]+"px",i(" Set "+r+" = "+t[e][r]+"px"))}r("maxHeight");r("minHeight");r("maxWidth");r("minWidth")}function c(t){return""===t&&(n.id=t="iFrameResizer"+rt++,s=(r||{}).log,i(" Added missing iframe ID: "+t+" ("+n.src+")")),t}function l(){i(" IFrame scrolling "+(t[e].scrolling?"enabled":"disabled")+" for "+e);n.style.overflow=!1===t[e].scrolling?"hidden":"auto";n.scrolling=!1===t[e].scrolling?"no":"yes"}function v(){("number"==typeof t[e].bodyMargin||"0"===t[e].bodyMargin)&&(t[e].bodyMarginV1=t[e].bodyMargin,t[e].bodyMargin=""+t[e].bodyMargin+"px")}function y(){var i=t[e].firstRun,r=t[e].heightCalculationMethod in ft;!i&&r&&d({iframe:n,height:0,width:0,type:"init"})}function p(t){function i(){u("iFrame.onload",t,n);y()}f(n,"load",i);u("init",t,n)}function w(n){if("object"!=typeof n)throw new TypeError("Options is not an object.");}function b(n){for(var i in a)a.hasOwnProperty(i)&&(t[e][i]=n.hasOwnProperty(i)?n[i]:a[i])}function k(n){return(""===n||"file://"===n)&&(n="*"),n}function g(i){i=i||{};t[e]={firstRun:!0,iframe:n,remoteHost:n.src.split("/").slice(0,3).join("/")};w(i);b(i);t[e].targetOrigin=!0===t[e].checkOrigin?k(t[e].remoteHost):"*";s=t[e].log}function nt(){return e in t&&"iFrameResizer"in n}var e=c(n.id);nt()?o(" Ignored iFrame, already setup."):(g(r),l(),h(),v(),p(tt(e)))}function v(n,t){null===l&&(l=setTimeout(function(){l=null;n()},t))}function ht(n){return null!==n.offsetParent}function ct(){function f(){function n(n){function i(i){return"0px"===t[n].iframe.style[i]}ht(t[n].iframe)&&(i("height")||i("width"))&&u("Visibility change","resize",t[n].iframe,n)}for(var i in t)n(i)}function e(n){i(" Mutation observed: "+n[0].target+" "+n[0].type);v(f,16)}function o(){var n=document.querySelector("body"),t=new r(e);t.observe(n,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var r=n.MutationObserver||n.WebKitMutationObserver;r&&o()}function lt(){function r(n){function t(){o("Window "+n,"resize")}i(" Trigger event: "+n);v(t,16)}function e(){function n(){o("Tab Visable","resize")}"hidden"!==document.visibilityState&&(i(" Trigger event: Visiblity change"),v(n,16))}function o(n,i){function f(n){return"parent"===t[n].resizeFrom&&t[n].autoResize&&!t[n].firstRun}for(var r in t)f(r)&&u(n,i,document.getElementById(r),r)}f(n,"message",st);f(n,"resize",function(){r("resize")});f(document,"visibilitychange",e);f(document,"-webkit-visibilitychange",e);f(n,"focusin",function(){r("focus")});f(n,"focus",function(){r("focus")})}function y(){function n(n,t){if(t.tagName)if("IFRAME"!==t.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+t.tagName+">.");else it(t,n);else throw new TypeError("Object is not a valid DOM element");}return et(),lt(),function(t,i){switch(typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),n.bind(undefined,t));break;case"object":n(t,i);break;default:throw new TypeError("Unexpected data type ("+typeof i+").");}}}function at(n){n.fn.iFrameResize=function(n){return this.filter("iframe").each(function(t,i){it(i,n)}).end()}}var rt=0,s=!1,p=!1,ut=7,h="[iFrameSizer]",c=h.length,r=null,e=n.requestAnimationFrame,ft={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},t={},l=null,a={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",interval:32,log:!1,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){},resizedCallback:function(){},scrollCallback:function(){return!0}};n.jQuery&&at(jQuery);typeof define=="function"&&define.amd?define([],y):typeof module=="object"&&typeof module.exports=="object"?module.exports=y():n.iFrameResize=n.iFrameResize||y()})(window||{});Array.prototype.forEach||(Array.prototype.forEach=function(n){"use strict";var t;if(this===void 0||this===null||typeof n!="function")throw new TypeError;var i=Object(this),r=i.length>>>0,u=arguments.length>=2?arguments[1]:void 0;for(t=0;t<r;t++)t in i&&n.call(u,i[t],t,i)});window.addEventListener?window.addEventListener("load",function(){LoadEverything()},!1):window.attachEvent?window.attachEvent("onload",function(){LoadEverything()}):document.getElementById&&setTimeout(function(){LoadEverything()},100);
//# sourceMappingURL=quick-book.min.js.map
